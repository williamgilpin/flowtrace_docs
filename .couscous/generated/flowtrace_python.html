<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>flowtrace</title>

        <link rel="stylesheet" href="http://williamgilpin.github.io/flowtrace_docs/css/bootstrap.min.css">
        <link rel="stylesheet" href="http://williamgilpin.github.io/flowtrace_docs/css/font-awesome.min.css">
        <link rel="stylesheet" href="http://williamgilpin.github.io/flowtrace_docs/css/highlight.dark.css">
        <link rel="stylesheet" href="http://williamgilpin.github.io/flowtrace_docs/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="http://williamgilpin.github.io/flowtrace_docs/">
                flowtrace
                <small class="hidden-xs hidden-sm">
                    A simple tool for visualizing fluid flows
                </small>
            </a>

            
        </header>

        <main class="container">
            <div class="row">

                
                <section id="content" class="col-sm-12">
                    <h1 id="flowtrace-for-python">flowtrace for Python</h1>
<p>Implementation of the flowtrace tool as a module for Python 2 / Python 3</p>
<p>William Gilpin, Vivek N. Prakash, and Manu Prakash, 2015</p>
<h2 id="installation">Installation</h2>
<p>Use your browser to download flowtrace for Python from <a href="https://github.com/williamgilpin/flowtrace_python">the host repository on GitHub</a> (Direct download link <a href="https://github.com/williamgilpin/flowtrace_python/archive/master.zip">here</a>). On OSX/Linux, you can initiate the download from the terminal using</p>
<pre><code>curl -OS https://github.com/williamgilpin/flowtrace_python/archive/master.zip</code></pre>
<p>Or, using git</p>
<pre><code>git clone https://github.com/williamgilpin/flowtrace_python.git</code></pre>
<h2 id="running-flowtrace">Running flowtrace</h2>
<p>Somewhere in your script, include the import statement</p>
<pre><code>&gt;&gt; from flowtrace import flowtrace</code></pre>
<p>Run using all defaults and a 30 frame projection window</p>
<pre><code>&gt;&gt; flowtrace('sample_data',30,'sample_output/')</code></pre>
<p>Subtract the median of every 30 frames to remove slow-moving background objects</p>
<pre><code>&gt;&gt; flowtrace('sample_data',30,'sample_output/',subtract_median=True)</code></pre>
<p>Color the output streamlines to denote the direction of time</p>
<pre><code>&gt;&gt; flowtrace('sample_data',30,'sample_output/',color_series=True)</code></pre>
<p>Adjust the number of cores that the code uses to multithread</p>
<pre><code>&gt;&gt; flowtrace('sample_data',30,'sample_output/',max_cores=2)</code></pre>
<h2 id="api-and-options">API and Options</h2>
<h3 id="arguments">Arguments</h3>
<p><strong>imagedir : str</strong></p>
<ul>
<li>path to directory containing raw image files</li>
</ul>
<p><strong>frames_to_merge : int</strong></p>
<ul>
<li>The numbe of frames to merge to form a single streamline image</li>
</ul>
<p><strong>out_dir : str</strong></p>
<ul>
<li>path to directory where streamline files are saved</li>
</ul>
<p><strong>max_cores : int</strong></p>
<ul>
<li>With multi-threading enabled, the maximum number of simultaneous jobs to run. </li>
<li>When running this, it's useful to calculate the total RAM available versus that required to completely hold an image stack of length frames_to_merge, since parallelization is not useful if there's not enough RAM for each core to complete a task</li>
</ul>
<p><strong>frames_to_skip : int</strong></p>
<ul>
<li>The number of images to skip when building each substack</li>
</ul>
<h3 id="keywords">Keywords</h3>
<p><strong>invert_color : bool</strong></p>
<ul>
<li>Set to &quot;True&quot; for dark objects moving against a white background</li>
</ul>
<p><strong>take_diff : bool</strong></p>
<ul>
<li>Whether to take the difference of consecutive frames</li>
</ul>
<p><strong>diff_order : int</strong></p>
<ul>
<li>The order of the difference in frames when take_diff is used</li>
</ul>
<p><strong>subtract_median : bool</strong></p>
<ul>
<li>For each substack, subtract the median before taking the z projection</li>
</ul>
<p><strong>subtract_first : bool</strong></p>
<ul>
<li>For each substack, subtract the first frame before taking the z projection</li>
</ul>
<p><strong>add_first_frame : bool</strong></p>
<ul>
<li>Add the unaltered first frame of the stack back to the stack before taking z projection. Makes it possible to view sharp structures in median transformed data</li>
</ul>
<p><strong>color_series : bool</strong></p>
<ul>
<li>Color the time traces</li>
</ul>
<h2 id="debugging">Debugging</h2>
<p><strong>The code just won't run</strong></p>
<ul>
<li>
<p>If you are consistently getting errors on your system, try disabling parallization with the setting <code>use_parallel=False</code>. Multithreading in Python can be configuration-specific, and so flowtrace will not succeed in multithreading if Python's multiprocessing library is not working.</p>
<pre><code>&gt;&gt; flowtrace('sample_data',30,'sample_output/', use_parallel=False)</code></pre>
</li>
<li>Certain combinations of keyword arguments might cause errors--for example, using median subtraction and inverting the color simultaneously might yield unpredictable results on color images.</li>
</ul>
<p><strong>The code is performing surprisingly slowly</strong>. </p>
<ul>
<li>If the code seems to be reading very slowly, try using Fiji or ImageJ to open the image sequence as a stack, convert to 8-bit tif (or RGB if using color) and then re-save all the files Even if the raw data is supposedly .tif, sometimes the encoding is funny and so scipy struggles to read the files.</li>
</ul>
<p><strong>Attempts to read or write files fail to find the appropriate directory</strong> (Windows only)</p>
<ul>
<li>Make sure you are using the correct format for filepaths on Windows. Instead of <code>Users/John/pics</code> use <code>Users//John//pics</code> or <code>Users\John\pics</code></li>
</ul>
<h2 id="future">Future</h2>
<p>Bug reports and pull requests are encouraged <a href="https://github.com/williamgilpin/flowtrace_python">through GitHub</a></p>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52823035-4', 'auto');
  ga('send', 'pageview');

</script>
                </section>

            </div>
        </main>

        <footer>
            <div class="container">
                <p class="text-muted">
                    website generated with <a href="http://couscous.io" title="Markdown website generator">Couscous</a>
                </p>
            </div>
        </footer>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yastatic.net/highlightjs/8.2/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
